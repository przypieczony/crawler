import re

class GetText():
    def __init__(self, text):
        self.raw_text = text

    def splitToWord(self):
        '''
        input: list generated by "getAlltext" function
    
        output: splits each word from the text apart and returns as list
        '''
        words = []
        for text in self.raw_text:
            for word in text.split(" "):
                words.append(word)
        return words

    def standarizeWords(self, splitted_words):
        '''
        input: list [strings]
    
        deletes all the string containing a number,
        removes any punctuation from each string,
    
        output: list [strings]
        '''
        new_word_list = []
        numbers = ["0","1","2","3","4","5","6","7","8","9"]
        p = re.compile("(\.|\!|\,|\?|\:|\;|\)|\(|\\|\/|\'|\")")
        for word in splitted_words:
            is_word = True
            word = p.sub(" ", word)
            word = word.lower()
            for number in numbers:
                if number in word:
                    is_word = False
                    break
            if is_word == True:
                new_word_list.append(word)
            new_word_list.sort()
        return new_word_list

    def countWords(self):
        '''
        input: list [strings]
            
        counts number of appearances of each word in the list
    
        output: dictionary { word : count of appearances }
        '''
        all_words = self.collect_words()
        words_count = {}
        for word in all_words:
            if word in words_count:
                words_count[word] += 1
            else:
                words_count[word] = 1
        return words_count

    def top5words(self):
        '''
        input: dictionary genereted by "countWords" function
    
        output: list of 5 keys(words) with biggest value
    
        NOT FULLY FUNCTIONAL
        '''
        words = self.countWords()
        top_num = 0
        top_word = ""
        keys = words.keys()
        for key in keys:
            if len(key) > 3 and key != 'the':  # banned words
                if words[key] > top_num:
                    top_num = words[key]
                    top_word = key
        return top_word



    def collect_words(self):
        '''
        input: address of existing website
    
        returns tuple (domain name, dictionary { words on site : number of appearences })
        '''
        words = self.standarizeWords(self.splitToWord())
        return words
        
#siema = GetText(list).top5words()
#print(siema)